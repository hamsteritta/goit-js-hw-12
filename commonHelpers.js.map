{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst apiKey = '45022873-80f77178c96ea8fdbff7ba9f5';\n\nexport async function findImg(query, page = 1, perPage = 15, image_type = 'photo', orientation = 'horizontal', safesearch = true) {  \n  try {   \n     const result = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: apiKey,\n        q: query,\n        image_type: image_type,\n        orientation: orientation,\n        safesearch: safesearch,\n        page: page,\n        per_page: perPage,\n      },\n     });\n    return result.data;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function render(imgList) {\n  const galleryBox = document.querySelector('.gallery');\n  const renderItems = imgList\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <div class=\"gallery-item\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          </a>\n          <div class=\"info\">\n            <p><b>Likes</b><span>${likes}</span></p>\n            <p><b>Views</b><span>${views}</span></p>\n            <p><b>Comments</b><span>${comments}</span></p>\n            <p><b>Downloads</b><span>${downloads}</span></p>\n          </div>\n        </div>\n    `\n    );\n  galleryBox.innerHTML += renderItems.join('');\n\n  new SimpleLightbox('.gallery-item a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  }).refresh();\n}","import { findImg } from './js/pixabay-api';\nimport { render } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport './css/styles.css';\n\nconst form = document.querySelector('#search');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst nextBtn = document.querySelector('.next-page');\nconst nextPageBox = document.querySelector('.next-page-box');\n\nlet page = 1;\nlet totalImg = 0;\nlet qTxt = '';\n\nform.addEventListener('submit', runForm);\nnextBtn.addEventListener('click', runNextBtn);\n\nasync function runForm(e) {\n  e.preventDefault();\n  qTxt = e.currentTarget.elements.searchQuery.value.toLowerCase();\n\n  if (qTxt == '') {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please enter a search query!',\n      });\n    return;\n  }  \n  await startFind(true);\n}\n\nasync function runNextBtn() {\n  await startFind();\n}\n\nasync function startFind(newFind = false) {\n  try {\n    loader.classList.add('loader-show');\n    nextPageBox.classList.remove('next-page-show');\n    \n    if (newFind) {\n      page = 1;\n      totalImg = 0;\n      gallery.innerHTML = '';\n    } else {\n      page++;\n    }\n\n    const data = await findImg(qTxt, page);\n    if (data.hits.length == 0) {\n      iziToast.info({\n        title: 'Info',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      totalImg += data.hits.length;\n      render(data.hits);       \n\n      const firstItem = document.querySelector('.gallery-item');\n      if (firstItem) {\n      window.scrollBy({\n        top: firstItem.getBoundingClientRect().height * 2,\n        behavior: 'smooth',\n      });\n    }\n\n      if (data.totalHits <= totalImg) {\n        iziToast.info({\n          title: 'Info',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      } else {\n        nextPageBox.classList.add('next-page-show');\n      }\n    }\n  } catch (error) { \n    iziToast.error({\n      title: 'Error',\n      message: `Something went wrong: ${error.message}`,\n    });\n  } finally {\n    loader.classList.remove('loader-show');\n  }\n  \n}"],"names":["apiKey","findImg","query","page","perPage","image_type","orientation","safesearch","axios","error","render","imgList","galleryBox","renderItems","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","form","gallery","loader","nextBtn","nextPageBox","totalImg","qTxt","runForm","runNextBtn","e","iziToast","startFind","newFind","data","firstItem"],"mappings":"+vBACA,MAAMA,EAAS,qCAER,eAAeC,EAAQC,EAAOC,EAAO,EAAGC,EAAU,GAAIC,EAAa,QAASC,EAAc,aAAcC,EAAa,GAAM,CAChI,GAAI,CAYF,OAXgB,MAAMC,EAAM,IAAI,2BAA4B,CAC1D,OAAQ,CACN,IAAKR,EACL,EAAGE,EACH,WAAYG,EACZ,YAAaC,EACb,WAAYC,EACZ,KAAMJ,EACN,SAAUC,CACX,CACP,CAAM,GACY,IACf,OAAQK,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,OAAO,CAC9B,CACH,CCjBO,SAASC,EAAOC,EAAS,CAC9B,MAAMC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAcF,EACjB,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,qBAESL,CAAa;AAAA,wBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,mCAGfC,CAAK;AAAA,mCACLC,CAAK;AAAA,sCACFC,CAAQ;AAAA,uCACPC,CAAS;AAAA;AAAA;AAAA,KAIhD,EACER,EAAW,WAAaC,EAAY,KAAK,EAAE,EAE3C,IAAIQ,EAAe,kBAAmB,CACpC,aAAc,MACd,aAAc,GAClB,CAAG,EAAE,QAAO,CACZ,CC7BA,MAAMC,EAAO,SAAS,cAAc,SAAS,EACvCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,YAAY,EAC7CC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIvB,EAAO,EACPwB,EAAW,EACXC,EAAO,GAEXN,EAAK,iBAAiB,SAAUO,CAAO,EACvCJ,EAAQ,iBAAiB,QAASK,CAAU,EAE5C,eAAeD,EAAQE,EAAG,CAIxB,GAHAA,EAAE,eAAc,EAChBH,EAAOG,EAAE,cAAc,SAAS,YAAY,MAAM,cAE9CH,GAAQ,GAAI,CACZI,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACjB,CAAO,EACH,MACD,CACD,MAAMC,EAAU,EAAI,CACtB,CAEA,eAAeH,GAAa,CAC1B,MAAMG,EAAS,CACjB,CAEA,eAAeA,EAAUC,EAAU,GAAO,CACxC,GAAI,CACFV,EAAO,UAAU,IAAI,aAAa,EAClCE,EAAY,UAAU,OAAO,gBAAgB,EAEzCQ,GACF/B,EAAO,EACPwB,EAAW,EACXJ,EAAQ,UAAY,IAEpBpB,IAGF,MAAMgC,EAAO,MAAMlC,EAAQ2B,EAAMzB,CAAI,EACrC,GAAIgC,EAAK,KAAK,QAAU,EACtBH,EAAS,KAAK,CACZ,MAAO,OACP,QACE,0EACV,CAAO,MACI,CACLL,GAAYQ,EAAK,KAAK,OACtBzB,EAAOyB,EAAK,IAAI,EAEhB,MAAMC,EAAY,SAAS,cAAc,eAAe,EACpDA,GACJ,OAAO,SAAS,CACd,IAAKA,EAAU,sBAAuB,EAAC,OAAS,EAChD,SAAU,QAClB,CAAO,EAGGD,EAAK,WAAaR,EACpBK,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACnB,CAAS,EAEDN,EAAY,UAAU,IAAI,gBAAgB,CAE7C,CACF,OAAQjB,EAAO,CACduB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,yBAAyBvB,EAAM,OAAO,EACrD,CAAK,CACL,QAAY,CACRe,EAAO,UAAU,OAAO,aAAa,CACtC,CAEH"}